# vi编辑器

Vi编辑器是所以Unix及Linux系统下标准的编辑器

vi没有菜单，只有命令

vi有三种基本工作模式：
- 命令模式（command mode)
- 插入模式（insert mode)
- 末行模式（last line mode)

## vi的进入与退出

### 1. 进入vi

vi <filename>
vi (退出vi时再指定文件名)

vi +n <filename> (进入vi之后，光标处于文件第n行上)
vi + <filename> (进入vi之后，光标处于文件最末行)

### 2.保存文件

command mode: 连按两次大写字母Z
last line mode:
    :w 保存文件，但不退出
    :w <newfile> 保存，文件名为newfile
    :w! <newfile> 如果newfile已存在，则覆盖原有内容

​    :q 退出vi,回到shell, 若文件未保存，vi会在窗口最末行提示
    :q! vi放弃所做修改直接退到shell
    :wq 保存并退出
    :x 与命令模式下ZZ功能相同

## 插入模式 
### 1. 进入插入模式

a 由光标之后加入资料
A 由该行之末加入资料
i 由光标之前加入资料
I 由该行之首加入资料
o 在该行之下新增一行
O 在该行之上新增一行

### 2. 离开插入模式

ESC

## 进入末行模式
: 命令
/ 查找
? 查找

## 搜寻
在vi中搜寻某一子串，使光标移至该处

/子串 从当前光标之后查找子串
?子串 从当前光标之前查找子串
n 往下继续寻找下一个
N 网上继续寻找下一个


## 取消前一动作(Undo)
复原执行上衣指令前的内容，需在命令模式下

u 恢复最后一个指令之前的结果
U 恢复光标该行的所有改变


## 编辑多个文件
vi file1 file2

当一个文件编辑完成后，可利用`:w`将该缓冲区存档，而后再利用`:n`载入下一个文件，`:N`载入上一个文件

同时vi多个文件时，CTRL-SHIFT-6回到上一个文件，在本次vi的文件和上次vi的文件之间切换，也可以使用`:e#`进行切换


## 子串搜寻与替换

s (substitute) 可搜寻某行列范围
g (global) 可搜寻整个编辑缓冲区

:10,20s/old/new 将第10行至第20行资料的'old'改成'new'
:%s/old/new/g 将编辑缓冲区中所有的'old'改成'new'

## vi常用快捷键

h 将光标左移一格
I 将光标右移一格
j 将光标下移一格
k 将光标上移一格

0 把光标移到当前行的第一个字符处
$ 把光标移到当前行的最后一格字符处

Ctrl + f 往后滚一页
Ctrl + d 往后滚半页
Ctrl + b 往前滚一页
Ctrl + u 往前滚半页
Ctrl + e 屏幕向下滚一行
Ctrl + y 屏幕向上滚一行

nG 将光标移至行号所指定的行的行首
在末行模式下，`:n`命令将移动至指定行

## 命令模式下，文本的编辑/删除

- 字符删除命令： 
    x dh
- 字和行删命令:
    dw 删除光标所在的后面的一个字符串(词)
    db 删除光标所在的前一个字符串
    dd 剪切光标所在的行
    d$ 剪切光标至行尾的内容 
    d0 剪切行首至光标的内容
    <n>dd 剪切从光标所在行开始的n行

- 文本块删除命令
    d)
    d(
    d}
    d{

- 相对屏幕删除
    dH
    dM
    dL

**删除操作**

x   删除光标所在的文字
nx  删除光标后面的n个字符
X   删除光标前面的一个字符
nX  删除光标前面的n个字符
dd  删除光标所在行
ndd 删除光标所在行向下数n行


## 复制
命令方式下输入yy或nyy，表示复制当前行或当前行开始的连续n行，n是一个具体的整数。

将光标移到要复制的地方，按p粘贴
